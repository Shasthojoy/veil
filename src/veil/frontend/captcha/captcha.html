<style type="text/css">
    img[name=captcha_image] {
        vertical-align: top;
    }
</style>
<span id="captcha-input-holder">
    <input name="captcha_challenge_code" value="{{ challenge_code }}" type="hidden"/>
    <input name="captcha_answer" id="captcha_answer"/>
</span>
<div class="captcha-image" style="font-size: 12px">
    <p class="inline">计算：</p>
    <img id="change-captcha" style="border: 1px solid #CCC;cursor: pointer" title="看不清？点击更换" src="{{ captcha_image_url }}" alt="验证码"/>
</div>
<div class="inline" id="captcha-result">
    <i class="cus-accept accept" style="display: none"></i>
    <i class="cus-cross error" style="display: none"></i>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $(document).on('click', '#change-captcha', function (e) {
            $.get('/captcha', {'_': $.now()},function (html) {
                $('#captcha-wrap').html(html);
            });
        });
        $(document).on('focus', '#captcha_answer', function(){
            $('#captcha-result').find('i').hide();
        });
        $(document).on('blur', '#captcha_answer', function(){
            var $captchaResult = $('#captcha-result');
            if(!$(this).val()) {
                $captchaResult.find('.accept').hide();
                $captchaResult.find('.error').show();
            } else {
                $captchaResult.find('.error').hide();
                $captchaResult.find('.accept').show();
            }
        });
    });
</script>